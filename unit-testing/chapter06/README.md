## 6장. 단위 테스트 스타일

```markdown
출력 기반, 상태 기반, 통신 기반이라는 세 가지 테스트 스타일이 있다.
출력 기반 스타일의 테스트가 가장 품질이 좋고, 상태 기반 테스트는 두 번째로 좋은 선택이며, 통신 기반 테스트는 간헐적으로만 사용해야 한다.
안타깝게도 출력 기반 테스트 스타일은 아무데서나 사용할 수 없으며, 순수 함수 방식으로 작성된 코드에만 적용된다.
```

### 6.1 단위 테스트의 세 가지 스타일

```markdown
단위 테스트는 세 가지 스타일이 있다.

- 출력 기반 테스트(output-based testing)
- 상태 기반 테스트(state-based testing)
- 통신 기반 테스트(communication-based testing)
  하나의 테스트에서 하나 또는 둘, 심지어 세 가지 스타일 모두를 함께 사용할 수 있다.
```

#### 6.1.1 출력 기반 테스트 정의

```markdown
첫 번째 단위 테스트 스타일은 출력 기반 스타일로, 테스트 대상 시스템(SUT)에 입력을 넣고 생성되는 출력을 검증하는 방식이다.
이러한 단위 테스트 스타일은 전역 상태나 내부 상태를 변경하지 않는 코드에만 적용되므로 반환 값만 검증하면 된다.
...
출력 기반 단위 테스트 스타일은 함수형(functional)이라고도 한다.
이 이름은 사이드 이펙트 없는 코드 선호를 강조하는 프로그래밍 방식인 함수형 프로그래밍(functional programming)에 뿌리를 두고 있다.
```

#### 6.1.2 상태 기반 스타일 정의

```markdown
상태 기반 스타일은 작업이 완료된 후 시스템 상태를 확인하는 것이다.
이 테스트 스타일에서 상태라는 용어는 SUT나 협력자 중 하나, 또는 데이터베이스나 파일 시스템 등과 같은 프로세스 외부 의존성의 상태 등을 의미할 수 있다.
```

#### 6.1.3 통신 기반 스타일 정의

```markdown
이 스타일은 목을 사용해 테스트 대상 시스템과 협력자 간의 통신을 검증한다.
```

### 6.2. 단위 테스트 스타일 비교

#### 6.2.4 스타일 비교하기: 결론

```markdown
출력 기반 테스트가 가장 결과가 좋다.
이 스타일은 구현 세부 사항과 거의 결합되지 않으므로 리팩터링 내성을 적절히 유지하고자 주의를 많이 기울일 필요가 없다.
이러한 테스트는 간결하고 프로세스 외부 의존성이 없기 때문에 유지 보수도 쉽다.
상태 기반 테스트와 통신 기반 테스트는 두 지표 모두 좋지 않다.
유출된 구현 세부 사항에 결합할 가능성이 높고, 크기도 커서 유지비가 많이 든다.
그러므로 항상 다른 것보다 출력 기반 테스트를 선호하라.
```

|                        | 출력 기반 | 상태 기반 | 통신 기반 |
|------------------------|-------|-------|-------|
| 리팩터링 내성을 지키기 위해 필요한 노력 | 낮음    | 중간    | 중간    |
| 유지비                    | 낮음    | 중간    | 높음    |
