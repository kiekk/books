## 11장 테스트 리팩토링

```markdown
테스트 코드는 상당한 투자를 의미합니다.
테스트는 결함을 최소화하고 리팩토링으로 프로덕션 시스템을 깔끔하게 유지시켜 주지만, 이것은 지속적인 비용을 의미하기도 합니다.
시스템이 변경됨에 따라 테스트 코드도 다시 들여다보아야합니다.
때때로 변경 사항들을 청소하고 그 결과로 깨진 수많은 테스트를 고쳐야 합니다.
...
테스트를 리팩토링하고 이해도를 최대화하며 유지 보수 비용을 최소화할 것입니다.
```
### 11.1 이해 검색
### 11.2 테스트 냄새: 불필요한 테스트 코드
### 11.3 테스트 냄새: 추상화 누락
### 11.4 테스트 냄새: 부적절한 정보

```markdown
잘 추상화된 테스트는 코드를 이해하는 데 중요한 것을 부각시켜 주고 그렇지 않은 것은 보이지 않게 해 줍니다.
테스트에 사용된 데이터는 스토리를 말하는 데 도움을 주어야 합니다.
```

```java
assertThat(search.getMatches(), containsMatches(new Match[] {
        new Match("1",
        "practical joke",
        "or a vast practical joke, though t") }));
```

```markdown
"1"을 포함한 매직 리터럴은 불필요한 질문을 유발합니다.
이것은 무슨 의미일까요? 그렇다면 그것은 테스트 결과에 대해 어떻게 연관성이 있을까요?
질문의 답을 찾기 위해 소스를 파느라 시간을 낭비하게 될 것입니다.
더 나은 해결책은 의미 있는 이름을 가진 상수를 도입하여 즉시 파악할 수 있도록 하는 것입니다.
```

### 11.5 테스트 냄새: 부푼 생성
### 11.6 테스트 냄새: 다수의 단언

```markdown
테스트마다 단언 한 개로 가는 방향은 좋은 생각입니다.
...
여러 개의 단언이 있다는 것은 테스트 케이스를 두 개 포함하고 있다는 증거입니다.
더 긴 테스트는 소리칩니다. "나를 나누어 줘!"
...
테스트를 두 개로 분할하면 각각을 좀 더 간결하게 테스트 맥락에 맞도록 기대하는 행동을 기술할 수 있습니다.
...
또 불필요한 주석을 제거하는 자유를 누리세요.
단일 목적의 테스트는 주석이 없어도 더 나은 테스트 이름으로 대신할 수 있습니다.
```

### 11.7 테스트 냄새: 테스트와 무관한 세부 사항들
### 11.8 테스트 냄새: 잘못된 조직
### 11.9 테스트 냄새: 암시적 의미
### 11.10 새로운 테스트 추가
### 11.11 마치며

```markdown
리팩토링된 테스트는 단순해졌습니다.
독자는 테스트 이름을 읽고서 어떤 케이스인지 이해할 수 있습니다.
먼저 테스트의 실행 부분에 집중하여 코드가 무엇을 실행하는지 압니다.
그들은 준비 부분에서 어떤 맥락으로 테스트가 실행되는지 이해하고, 단언 한 개로 기대하는 결과가 무엇인지 파악합니다.
이렇게 이해가 잘 되는 행위들은 전보다 훨씬 더 빠르게 실행합니다.
테스트를 이해하는 데 필요한 시간은 아마 몇 분에서 수 초로 줄어들 것입니다.
```
`Tip: 테스트로 시스템을 이해하고자 한다면 테스트를 깔끔하게 유지하는 것이 좋습니다.`
```markdown
프로덕션 코드를 깔끔하고 간결하게 리팩토링하고, 프로덕션 코드를 설계할 때 더 많은 유연성을 제공하도록 리팩토링하고,
시스템의 의존성 도전 과제에 대해 목을 지원하고, 유지 보수 비용을 최소화하고, 이해도를 최대화하도록 테스트를 리팩토링하는 것입니다.
```
