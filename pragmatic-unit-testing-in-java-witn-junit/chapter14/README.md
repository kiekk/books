## 14장 프로젝트에서 테스트

### 14.2 팀과 같은 편 되기

```markdown
개발자들이 단위 테스트에 접근하는 방식은 개인별로 매우 다릅니다.
어떤 개발자들은 TDD를 주장합니다.
다른 사람들은 그들이 필요하다고 느낀 테스트에서만 단위 테스트를 주장할 것입니다.
일부 개발자들은 다수의 케이스를 단일 테스트 메서드로 몰아넣기를 좋아합니다.
또는 느린 통합 테스트를 선호하기도 합니다.
분명한 것은 책에서 읽은 권장 사항을 모든 사람이 동의하지는 않는다는 점입니다.
팀이 같은 편이 되는 것이 중요합니다.
오랜 언쟁(혹은 해결책 없이 끝없는 엎치락뒤치락)은 다른 사람의 시간을 빼앗는 일이 됩니다.
여러분이 모든 것에 동의할 수 없을지라도 적어도 어떤 것에는 동의하고 합의점을 늘려 가는 방향으로 시작해야 합니다.
```

#### 14.2.1 단위 테스트 표준 만들기

```markdown
단위 테스트에 관해 어떤 표준을 도출하고 싶을 것입니다.
아주 작게 시작하고 다음 두 질문에 대답해 보세요.
- 개발자들은 어떤 것이 모든 사람의 시간을 많이 낭비하게 만든다고 느끼나요?
- 모두가 빠르게 동의할 수 있는 단순한 표준은 무엇인가요?
...
초창기에 표준화해야 하는 목록은 다음과 같습니다.
- 코드를 체크인하기 전에 어떤 테스트를 실행해야 할지 여부
- 테스트 클래스와 메서드의 이름 짓는 방식
- 햄크레스트 혹은 전통적인 단언 사용 여부
- AAA 사용 여부
- 선호하는 목 도구 선택
- 체크인 테스트를 실행할 때 콘솔에 출력을 허용할지 여부
- 단위 테스트 스위트에서 느린 테스트를 분명하게 식별하고 막을 방법
```

#### 14.2.2 리뷰로 표준 준수 높이기

```markdown
표준을 준수하는 것은 쉽지 않습니다.
...
팀에 단위 테스트와 프로덕션 코드는 너무 소중하기 때문에 팀원 모두가 코드를 마음대로 작성해서는 안 됩니다.
테스트도 마찬가지입니다.
```

### 14.4 코드 커버리지

```markdown
관리자들은 숫자를 사랑합니다.
코드 커버리지라는 개념(얼마나 많은 코드가 단위 테스트되었나?)은 전형적인 관리자의 숫자 강박을 자극하지만, 궁극적으로 교육 목적이 아닌 곳에서 사용했을 때는 씁쓸한 기분을 남길 수 있습니다.
```

#### 14.4.1 커버리지는 어느 정도여야 하는가?

```markdown
표면적으로 더 높은 코드 커버리지가 좋고, 낮은 커버리지는 나쁜 것 같습니다.
...
분명하게 0%는 충분하지 않고 100%는 훌륭해 보입니다.
하지만 현실적일까요?
커버리지 개념은 오로지 속임수를 써야만 100%에 도달할 수 있다는 제한이 내재되어 있습니다.
```

#### 14.4.2 100% 커버리지는 진짜 좋은가?

```markdown
설계가 좋을수록 테스트 작성도 쉬워집니다.
...
의지가 반영된 좋은 설계는 여러분을 더 적은 결함으로 이끄는 100% 커버리지에 도달할 수 있게 할 것입니다.
실제로 100%는 안 되지만 괜찮습니다.
...
커버리지 퍼센트 자체는 오도될 수 있습니다.
테스트 몇 개에 대량의 코드 커버리지를 달성하지만 단언은 거의 없는 형태가 되기 쉽습니다.
...
많은 팀이 높은 커버리지만 달성하고 가치는 별로 없는 단위 테스트를 작성하느라 시간 낭비하는 것을 보았습니다.
```

#### 14.4.3 코드 커버리지의 가치

```markdown
코드 커버리지 숫자는 그 자체로 큰 의미가 없습니다.
하지만 코드 커버리지의 추세는 중요합니다.
팀은 시간이 지나면서 커버리지 퍼센트가 높아져야 하고 적어도 아래 방향으로 내려가면 안 됩니다.
```
`Tip: 코드 커버리지 도구는 코드가 어디에서 커버리지가 부족한지, 팀이 어디에서 아래 방향으로 내려가고 있는지 이해하려고 할 때만 사용하세요.`
