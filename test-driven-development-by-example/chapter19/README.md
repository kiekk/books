## 19장 테이블 차리기

```markdown
테스트를 작성하다보면 공통된 패턴을 발견하게 될 것이다.
(빌 웨이크는 이 패턴을 3A라 부른다.)
1. 준비(arrange) - 객체를 생성ㅎ나다.
2. 행동(act) - 어떤 자극을 준다.
3. 확인(assert) - 결과를 검사한다.

...

만약 이 패턴이 서로 다른 스케일에서 반복된다면(실제로 그렇다) 테스트를 위해 새로운 객체를 얼마나 자주 생성해야 하는가 하는 문제에 직면하게 된다.
이 때 다음 두 가지 제약이 상충한다.
- 성능 - 우린 테스트가 될 수 있는 한 빨리 실행되길 원한다.
  여러 테스트에서 같은 객체를 사용한다면, 객체 하나만 생성해서 모든 테스트가 이 객체를 쓰게 할 수 있을 것이다.
- 격리 - 우린 한 테스트에서의 성공이나 실패가 다른 테스트에 영향을 주지 않기를 원한다. 
  만약 테스트들이 객체를 공유하는 상태에서 하나의 테스트가 공유 객체의 상태를 변경한다면 다음 테스트의 결과에 영향을 미칠 가능성이 있다.

테스트 사이의 커플링은 확실히 지저분한 결과를 야기한다.
한 테스트가 깨지면, 다음 열 개의 테스트 코드가 올바르더라도 같이 깨지는 식이다.
또한 드물지만 매우 어려운 문제가 야기될 수 있다.
테스트가 실행되는 순서가 중요한 경우가 있는데, 만약 테스트 B를 실행하기 전에 테스트 A를 실행하면 둘 다 제대로 작동하지만 A를 실행하기 전에 B를 실행하면 테스트 A가 실패할 수 있다.
이와 관련하여 더 문제가 되는 상황이 있다.
테스트 B가 잘못됐지만 테스트 A를 먼저 실행했기 때문에 테스트 B가 통과하는 경우다.
테스트 커플링을 만들지 말 것.
```
